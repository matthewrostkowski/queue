<!DOCTYPE html>
<html class="min-h-screen">
<head>
  <title>Queue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1db954',
            'bg-elev': '#ffffff',
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer base {
      :root {
        --bg: #f8fafc;
        --bg-elev: #ffffff;
        --fg: #0a0a0b;
        --primary: #1db954;
        --muted: #63666a;
        --error: #b91c1c;
        --border: #ececef;
        --accent: #111827;
      }
      
      .dark {
        --bg: #0a0a0b;
        --bg-elev: #1a1a1a;
        --fg: #f8fafc;
        --primary: #1ed760;
        --muted: #9ca3af;
        --error: #ef4444;
        --border: #2d2d2d;
        --accent: #1db954;
      }
      
      body {
        @apply bg-[color:var(--bg)] text-[color:var(--fg)];
      }
    }
  </style>
</head>
<body class="min-h-screen antialiased">
  <header class="sticky top-0 backdrop-blur-sm bg-[color:var(--bg-elev)]/90 border-b border-[color:var(--border)] z-10">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-x-8">
          <div class="text-lg font-bold">Queue</div>

          <% if current_user %>
            <nav class="hidden md:flex items-center gap-x-6">
              <% if current_user&.admin? %>
                <%= link_to "Admin Dashboard", admin_dashboard_path, class: "text-sm font-medium text-yellow-500 hover:text-yellow-400 transition-colors" %>
                <%= link_to "Manage Users", admin_users_path, class: "text-sm font-medium text-yellow-500 hover:text-yellow-400 transition-colors" %>
              <% end %>
              <%= link_to "Main", root_path, class: "text-sm font-medium hover:text-[color:var(--primary)] transition-colors" %>
              <%= link_to "Scan", scan_path, class: "text-sm font-medium hover:text-[color:var(--primary)] transition-colors" %>
              <%= link_to "Queue", queue_path, class: "text-sm font-medium hover:text-[color:var(--primary)] transition-colors" %>
              <%= link_to "Search", search_path, class: "text-sm font-medium hover:text-[color:var(--primary)] transition-colors" %>
              <%= link_to "Profile", profile_path, class: "text-sm font-medium hover:text-[color:var(--primary)] transition-colors" %>
            </nav>
          <% end %>
        </div>

        <% if current_user %>
          <div class="flex items-center gap-x-3">
            <span id="current-user" class="text-sm text-[color:var(--muted)]"><%= current_user.display_name %></span>
            <%= button_to "Logout", logout_path, method: :delete,
                  class: "inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm font-medium bg-white/5 border border-white/15 hover:bg-white/10 transition-all",
                  form: { class: "inline" } %>
          </div>
        <% else %>
          <nav>
            <%= link_to "Login", root_path, class: "text-sm font-medium hover:text-[color:var(--primary)] transition-colors" %>
          </nav>
        <% end %>
      </div>
    </div>
  </header>

  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    <% flash.each do |type, msg| %>
      <div class="my-4 p-3 rounded-lg text-sm <%= type == 'notice' ? 'bg-blue-50 text-blue-900 border border-blue-200' : 'bg-amber-50 text-amber-900 border border-amber-200' %>">
        <%= msg %>
      </div>
    <% end %>

    <div class="my-8">
      <%= yield %>
    </div>
  </div>
</body>
</html>